<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>User Access Tokens | Node.js SDK for digi.me</title><meta name="description" content="Documentation for Node.js SDK for digi.me"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Node.js SDK for digi.me</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="User_creation_and_authorization.html">User creation and authorization</a></li><li><a href="" aria-current="page">User Access Tokens</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="user-access-tokens" class="tsd-anchor-link">User Access Tokens<a href="#user-access-tokens" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>In order to push or read data from a user's account, we will need a user access token.
Once we have this, we can access up-to-date data from the sources the user has onboarded to their library.</p>
<p>User access tokens are obtained after a user successfully completes the <a href="User_creation_and_authorization.Authorizing.html">authorization process</a>.</p>
<p>Separate user access tokens are required for each contract, so it is possible to have multiple tokens for one user if you need to read and push data.</p>
<h2 id="access-token-expiry" class="tsd-anchor-link">Access Token Expiry<a href="#access-token-expiry" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The access token will eventually expire. When it is first created, a timestamp (Unix Epoch Time) indicating when it will expire is returned. The SDK will attempt to refresh the token automatically when it is used again. If a refresh is needed, the new access token will be returned to you.</p>
<p>If the refresh is unsuccessful, you'll need to go through <a href="User_creation_and_authorization.Reauthorizing.html">reauthorization process</a>.</p>
<p>Please note that methods for reading data will also attempt auto-refresh, so ensure that you have logic to store the latest token returned by the SDK.</p>
<h2 id="refresh-token" class="tsd-anchor-link">Refresh Token<a href="#refresh-token" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>SDK methods have an option for automatic token refresh, as explained in the respective methods. However, if the token has expired or is close to expiring, there is an option to manually issue a new token and control the process internally.</p>
<p>Access token can be issued manually by calling refreshToken method as explained below:</p>
<pre><code class="typescript"><span class="hl-9">// Initialize the SDK</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">init</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@digime/digime-sdk-nodejs&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sdk</span><span class="hl-1"> = </span><span class="hl-0">init</span><span class="hl-1">({ </span><span class="hl-4">applicationId:</span><span class="hl-1"> &lt;</span><span class="hl-7">you</span><span class="hl-1">-</span><span class="hl-7">application</span><span class="hl-1">-</span><span class="hl-7">id</span><span class="hl-1">&gt; });</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">contractDetails</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">contractId:</span><span class="hl-1"> &lt;</span><span class="hl-7">your</span><span class="hl-1">-</span><span class="hl-7">contract</span><span class="hl-1">-</span><span class="hl-7">id</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-4">privateKey:</span><span class="hl-1"> &lt;</span><span class="hl-7">private</span><span class="hl-1">-</span><span class="hl-7">key</span><span class="hl-1">-</span><span class="hl-7">for</span><span class="hl-1">-</span><span class="hl-7">contract</span><span class="hl-1">-</span><span class="hl-7">id</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-9">// contractDetails - The same one used in getAuthorizeUrl().</span><br/><span class="hl-9">// userAccessToken - The user access token from the authorization step.</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">newToken</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">sdk</span><span class="hl-1">.</span><span class="hl-0">refreshToken</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">contractDetails</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">userAccessToken</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/>
</code><button type="button">Copy</button></pre>

<p>If refresh token expired you should see error similar to <code>The token (refresh_token) is invalid</code>. In this case please check <a href="User_creation_and_authorization.Reauthorizing.html">getReauthorizeUrl</a> method.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#user-access-tokens"><span>User <wbr/>Access <wbr/>Tokens</span></a><ul><li><a href="#access-token-expiry"><span>Access <wbr/>Token <wbr/>Expiry</span></a></li><li><a href="#refresh-token"><span>Refresh <wbr/>Token</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">Node.js SDK for digi.me</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
